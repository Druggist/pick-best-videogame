package main.resources.rules;
dialect  "mvel"

import org.kie.api.runtime.KieRuntime
import java.util.ArrayList
import javax.swing.JOptionPane
import javax.swing.JFrame
import java.util.Arrays

global JFrame frame


declare Choice
	question : String
	answers : ArrayList
	decision : String
end

function String ask(JFrame frame, Choice choice) {
        Object[] options = choice.getAnswers().toArray();
        return options[JOptionPane.showOptionDialog(frame,
                                             choice.getQuestion(),
                                             "",
                                             JOptionPane.YES_NO_OPTION,
                                             JOptionPane.QUESTION_MESSAGE,
                                             null,
                                             options,
                                             options[0])].toString();
}

rule "ask"
	when
		c : Choice(decision == "")
	then
		c.setDecision(ask(frame, c));
		update(c)
end

rule "Do you want to avoid using much of your brain?"
	then
	    Choice choice = new Choice();
	    choice.setQuestion("Do you want to avoid using much of your brain?");
        choice.setAnswers( new ArrayList(Arrays.asList("Yes", "No")));
        choice.setDecision("");
		insert(choice);
end

rule "How are your reflexes?"
	when
		c : Choice()
	then
	    Choice choice = new Choice();
		if (c.getDecision().equals("Yes")) {
		    choice.setQuestion("How are your reflexes?");
		    choice.setAnswers(new ArrayList(Arrays.asList("Yes", "HIHI")));
		    choice.setDecision("");
		}

		insert(choice);
end